- name: Update a Problem (PUT)
  hosts: localhost
  connection: local
  gather_facts: no

  vars_files:
    - credentials.yml

  tasks:
    - name: Update Problem
      manageengine.sdp_cloud.write_record:
        domain: "{{ domain }}"
        parent_module_name: "problem"
        parent_id: "100" # Replace with actual Problem ID
        operation: "Update"
        client_id: "{{ client_id }}"
        client_secret: "{{ client_secret }}"
        refresh_token: "{{ refresh_token }}"
        dc: "{{ dc }}"
        portal_name: "{{ portal_name }}"
        payload:
          title: "Updated Title via Ansible"
          description: "Updated description via sdp_api module"
          urgency: "Low"
      register: update_response

    - name: Display Update Response
      ansible.builtin.debug:
        msg: 
          - "{{ update_response }}"
